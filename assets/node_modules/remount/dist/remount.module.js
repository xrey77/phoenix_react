import n from"react";import{createRoot as t}from"react-dom/client";function e(){return e=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},e.apply(this,arguments)}function o(n){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},o(n)}function r(n,t){return r=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},r(n,t)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function i(n,t,e){return i=u()?Reflect.construct:function(n,t,e){var o=[null];o.push.apply(o,t);var u=new(Function.bind.apply(n,o));return e&&r(u,e.prototype),u},i.apply(null,arguments)}function a(n){var t="function"==typeof Map?new Map:void 0;return a=function(n){if(null===n||-1===Function.toString.call(n).indexOf("[native code]"))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,e)}function e(){return i(n,arguments,o(this).constructor)}return e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r(e,n)},a(n)}var c={__proto__:null,name:"CustomElements",defineElement:function(n,t,e){var o=e.onUpdate,u=e.onUnmount,i=e.onMount;!function(){if(!(window.HTMLElement&&window.HTMLElement._babelES5Adapter||void 0===window.Reflect||void 0===window.customElements||window.customElements.hasOwnProperty("polyfillWrapFlushCallback"))){var n=HTMLElement;window.HTMLElement=function(){return Reflect.construct(n,[],this.constructor)},HTMLElement.prototype=n.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,n),HTMLElement._babelES5Adapter=!0}}();var c=n.attributes||[],s=/*#__PURE__*/function(t){var e,a;function s(){return t.apply(this,arguments)||this}a=t,(e=s).prototype=Object.create(a.prototype),e.prototype.constructor=e,r(e,a);var l,f,p=s.prototype;return p.connectedCallback=function(){this._mountPoint=function(n,t){if(t.shadow&&n.attachShadow){var e=document.createElement("span");return n.attachShadow({mode:"open"}).appendChild(e),e}return n}(this,n),i(this,this._mountPoint)},p.disconnectedCallback=function(){this._mountPoint&&u(this,this._mountPoint)},p.attributeChangedCallback=function(){this._mountPoint&&o(this,this._mountPoint)},l=s,(f=[{key:"observedAttributes",get:function(){return["props-json"].concat(c)}}])&&function(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}(l,f),Object.defineProperty(l,"prototype",{writable:!1}),s}(/*#__PURE__*/a(HTMLElement));n.quiet&&window.customElements.get(t)||window.customElements.define(t,s)},isSupported:function(){return!(!window.customElements||!window.customElements.define)},supportsShadow:function(){return!!(document&&document.body&&document.body.attachShadow)}};function s(n,t){for(var e=0,o=n.length;e<o;e++)t(n[e])}var l="MutationObserver",f={};function p(n,t,e){n.nodeName.toLowerCase()===t?(e.onMount(n,n),function(n,t){var e=t.onUpdate;new MutationObserver(function(n){s(n,function(n){var t=n.target;d(t)&&e(t,t)})}).observe(n,{attributes:!0})}(n,e),function(n,t){var e=t.onUnmount,o=n.parentNode;if(o){var r=new MutationObserver(function(t){s(t,function(t){s(t.removedNodes,function(t){n===t&&d(n)&&(r.disconnect(o),e(n,n))})})});r.observe(o,{childList:!0,subtree:!0})}}(n,e)):n.children&&n.children.length&&s(n.children,function(n){d(n)&&p(n,t,e)})}function d(n){return!!n}var m,h={__proto__:null,name:l,observers:f,isSupported:function(){return"MutationObserver"in window},defineElement:function(n,t,e){if(!function(n){return!(-1===n.indexOf("-")||!n.match(/^[a-z][a-z0-9-]*$/))}(t=t.toLowerCase())){if(n.quiet)return;throw new Error('Remount: "'+t+'" is not a valid custom element elName')}if(f[t]){if(n.quiet)return;throw new Error('Remount: "'+t+'" is already registered')}var o=new MutationObserver(function(n){s(n,function(n){s(n.addedNodes,function(n){d(n)&&p(n,t,e)})})});o.observe(document.body,{childList:!0,subtree:!0}),f[l]=o,window.addEventListener("DOMContentLoaded",function(){s(document.getElementsByTagName(l),function(n){return p(n,l,e)})})},supportsShadow:function(){return!1}};function v(){if(m)return m;var n=[c,h].find(function(n){return!!n.isSupported()});return n||console.warn("Remount: This browser doesn't support the MutationObserver API or the Custom Elements API. Including polyfills might fix this. Remount elements will not work. https://github.com/rstacruz/remount"),m=n,n}function b(n,t){var e=n.getAttribute("props-json");return e?JSON.parse(e):(t||[]).reduce(function(t,e){return t[e]=n.getAttribute(e),t},{})}var w=["onAbort","onAnimationCancel","onAnimationEnd","onAnimationIteration","onAuxClick","onBlur","onChange","onClick","onClose","onContextMenu","onDoubleClick","onError","onFocus","onGotPointerCapture","onInput","onKeyDown","onKeyPress","onKeyUp","onLoad","onLoadEnd","onLoadStart","onLostPointerCapture","onMouseDown","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onReset","onResize","onScroll","onSelect","onSelectionChange","onSelectStart","onSubmit","onTouchCancel","onTouchMove","onTouchStart","onTouchEnd","onTransitionCancel","onTransitionEnd","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onFocusOut"],y={onDoubleClick:"dblclick"},E={onInput:"onChange",onFocusOut:"onBlur",onSelectionChange:"onSelect"};function g(n,t){for(var e in n)if(n.hasOwnProperty(e)&&-1!==e.indexOf(t))return n[e]}function O(n){if(n)return n.memoizedProps?n.memoizedProps:n._currentElement&&n._currentElement.props?n._currentElement.props:void 0}function _(n,t,e){n.persist=function(){n.isPersistent=function(){return!0}},e[t]&&e[t](n)}function P(e,o,r,u){var i,a,c=/*#__PURE__*/n.createElement(e.component,r),s=t(o);o.__remountRoot=s,s.render(c),u&&(i=u.shadowRoot,a=[],w.forEach(function(n){var t=function(n){return y[n]?y[n]:n.replace(/^on/,"").toLowerCase()}(n);function e(t){for(var e=t.path||t.composedPath&&t.composedPath()||function(n){for(var t=[];n;){if(t.push(n),"HTML"===n.tagName)return t.push(document),t.push(window),t;n=n.parentElement}}(t.target),o=0;o<e.length;o++){var r,u=e[o],a=g(u,"_reactInternal");if(r=g(u,"__reactEventHandlers")||O(a),a&&r&&_(t,n,r),a&&r&&E[n]&&_(t,E[n],r),t.cancelBubble)break;if(u===i)break}}i.addEventListener(t,e,!1),a.push(function(){i.removeEventListener(t,e,!1)})}))}var M,C=(M={__proto__:null,mount:function(n,t,e,o){return P(n,t,e,o)},update:P,unmount:function(n,t){var e;null==(e=t.__remountRoot)||e.unmount()}},function(n,t){return void 0===n&&(n={}),void 0===t&&(t={}),function(n,t){var e=v();e&&Object.keys(n).forEach(function(o){var r,u,i=Object.assign({},t,"object"==typeof(u=r=n[o])&&u.component?r:{component:r}),a=i.adapter;if(!a)throw new Error("No suitable adapter found");e.defineElement(i,o,{onMount:function(n,t){var e=b(n,i.attributes);a.mount(i,t,e,i.shadow&&i.retarget?n:null)},onUpdate:function(n,t){var e=b(n,i.attributes);a.update(i,t,e,null)},onUnmount:function(n,t){a.unmount(i,t)}})})}(n,e({adapter:M},t))}),L={define:C,getStrategy:v};export{L as default,C as define,v as getStrategy};
//# sourceMappingURL=remount.module.js.map
