!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom/client")):"function"==typeof define&&define.amd?define(["exports","react","react-dom/client"],t):t((n||self).Remount={},n.React,n.client)}(this,function(n,t,e){function o(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var r=/*#__PURE__*/o(t);function u(){return u=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},u.apply(this,arguments)}function i(n){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},i(n)}function c(n,t){return c=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},c(n,t)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function s(n,t,e){return s=a()?Reflect.construct:function(n,t,e){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(n,o));return e&&c(r,e.prototype),r},s.apply(null,arguments)}function f(n){var t="function"==typeof Map?new Map:void 0;return f=function(n){if(null===n||-1===Function.toString.call(n).indexOf("[native code]"))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,e)}function e(){return s(n,arguments,i(this).constructor)}return e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),c(e,n)},f(n)}var l={__proto__:null,name:"CustomElements",defineElement:function(n,t,e){var o=e.onUpdate,r=e.onUnmount,u=e.onMount;!function(){if(!(window.HTMLElement&&window.HTMLElement._babelES5Adapter||void 0===window.Reflect||void 0===window.customElements||window.customElements.hasOwnProperty("polyfillWrapFlushCallback"))){var n=HTMLElement;window.HTMLElement=function(){return Reflect.construct(n,[],this.constructor)},HTMLElement.prototype=n.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,n),HTMLElement._babelES5Adapter=!0}}();var i=n.attributes||[],a=/*#__PURE__*/function(t){var e,a;function s(){return t.apply(this,arguments)||this}a=t,(e=s).prototype=Object.create(a.prototype),e.prototype.constructor=e,c(e,a);var f,l,d=s.prototype;return d.connectedCallback=function(){this._mountPoint=function(n,t){if(t.shadow&&n.attachShadow){var e=document.createElement("span");return n.attachShadow({mode:"open"}).appendChild(e),e}return n}(this,n),u(this,this._mountPoint)},d.disconnectedCallback=function(){this._mountPoint&&r(this,this._mountPoint)},d.attributeChangedCallback=function(){this._mountPoint&&o(this,this._mountPoint)},f=s,(l=[{key:"observedAttributes",get:function(){return["props-json"].concat(i)}}])&&function(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}(f,l),Object.defineProperty(f,"prototype",{writable:!1}),s}(/*#__PURE__*/f(HTMLElement));n.quiet&&window.customElements.get(t)||window.customElements.define(t,a)},isSupported:function(){return!(!window.customElements||!window.customElements.define)},supportsShadow:function(){return!!(document&&document.body&&document.body.attachShadow)}};function d(n,t){for(var e=0,o=n.length;e<o;e++)t(n[e])}var p="MutationObserver",m={};function h(n,t,e){n.nodeName.toLowerCase()===t?(e.onMount(n,n),function(n,t){var e=t.onUpdate;new MutationObserver(function(n){d(n,function(n){var t=n.target;v(t)&&e(t,t)})}).observe(n,{attributes:!0})}(n,e),function(n,t){var e=t.onUnmount,o=n.parentNode;if(o){var r=new MutationObserver(function(t){d(t,function(t){d(t.removedNodes,function(t){n===t&&v(n)&&(r.disconnect(o),e(n,n))})})});r.observe(o,{childList:!0,subtree:!0})}}(n,e)):n.children&&n.children.length&&d(n.children,function(n){v(n)&&h(n,t,e)})}function v(n){return!!n}var b,w={__proto__:null,name:p,observers:m,isSupported:function(){return"MutationObserver"in window},defineElement:function(n,t,e){if(!function(n){return!(-1===n.indexOf("-")||!n.match(/^[a-z][a-z0-9-]*$/))}(t=t.toLowerCase())){if(n.quiet)return;throw new Error('Remount: "'+t+'" is not a valid custom element elName')}if(m[t]){if(n.quiet)return;throw new Error('Remount: "'+t+'" is already registered')}var o=new MutationObserver(function(n){d(n,function(n){d(n.addedNodes,function(n){v(n)&&h(n,t,e)})})});o.observe(document.body,{childList:!0,subtree:!0}),m[p]=o,window.addEventListener("DOMContentLoaded",function(){d(document.getElementsByTagName(p),function(n){return h(n,p,e)})})},supportsShadow:function(){return!1}};function y(){if(b)return b;var n=[l,w].find(function(n){return!!n.isSupported()});return n||console.warn("Remount: This browser doesn't support the MutationObserver API or the Custom Elements API. Including polyfills might fix this. Remount elements will not work. https://github.com/rstacruz/remount"),b=n,n}function E(n,t){var e=n.getAttribute("props-json");return e?JSON.parse(e):(t||[]).reduce(function(t,e){return t[e]=n.getAttribute(e),t},{})}var g=["onAbort","onAnimationCancel","onAnimationEnd","onAnimationIteration","onAuxClick","onBlur","onChange","onClick","onClose","onContextMenu","onDoubleClick","onError","onFocus","onGotPointerCapture","onInput","onKeyDown","onKeyPress","onKeyUp","onLoad","onLoadEnd","onLoadStart","onLostPointerCapture","onMouseDown","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onReset","onResize","onScroll","onSelect","onSelectionChange","onSelectStart","onSubmit","onTouchCancel","onTouchMove","onTouchStart","onTouchEnd","onTransitionCancel","onTransitionEnd","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onFocusOut"],O={onDoubleClick:"dblclick"},_={onInput:"onChange",onFocusOut:"onBlur",onSelectionChange:"onSelect"};function P(n,t){for(var e in n)if(n.hasOwnProperty(e)&&-1!==e.indexOf(t))return n[e]}function M(n){if(n)return n.memoizedProps?n.memoizedProps:n._currentElement&&n._currentElement.props?n._currentElement.props:void 0}function C(n,t,e){n.persist=function(){n.isPersistent=function(){return!0}},e[t]&&e[t](n)}function L(n,t,o,u){var i,c,a=/*#__PURE__*/r.default.createElement(n.component,o),s=e.createRoot(t);t.__remountRoot=s,s.render(a),u&&(i=u.shadowRoot,c=[],g.forEach(function(n){var t=function(n){return O[n]?O[n]:n.replace(/^on/,"").toLowerCase()}(n);function e(t){for(var e=t.path||t.composedPath&&t.composedPath()||function(n){for(var t=[];n;){if(t.push(n),"HTML"===n.tagName)return t.push(document),t.push(window),t;n=n.parentElement}}(t.target),o=0;o<e.length;o++){var r,u=e[o],c=P(u,"_reactInternal");if(r=P(u,"__reactEventHandlers")||M(c),c&&r&&C(t,n,r),c&&r&&_[n]&&C(t,_[n],r),t.cancelBubble)break;if(u===i)break}}i.addEventListener(t,e,!1),c.push(function(){i.removeEventListener(t,e,!1)})}))}var S,T=(S={__proto__:null,mount:function(n,t,e,o){return L(n,t,e,o)},update:L,unmount:function(n,t){var e;null==(e=t.__remountRoot)||e.unmount()}},function(n,t){return void 0===n&&(n={}),void 0===t&&(t={}),function(n,t){var e=y();e&&Object.keys(n).forEach(function(o){var r,u,i=Object.assign({},t,"object"==typeof(u=r=n[o])&&u.component?r:{component:r}),c=i.adapter;if(!c)throw new Error("No suitable adapter found");e.defineElement(i,o,{onMount:function(n,t){var e=E(n,i.attributes);c.mount(i,t,e,i.shadow&&i.retarget?n:null)},onUpdate:function(n,t){var e=E(n,i.attributes);c.update(i,t,e,null)},onUnmount:function(n,t){c.unmount(i,t)}})})}(n,u({adapter:S},t))});n.default={define:T,getStrategy:y},n.define=T,n.getStrategy=y});
//# sourceMappingURL=remount.umd.js.map
