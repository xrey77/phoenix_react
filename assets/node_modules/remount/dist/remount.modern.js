import n from"react";import{createRoot as t}from"react-dom/client";function e(){return e=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},e.apply(this,arguments)}var o={__proto__:null,name:"CustomElements",defineElement:function(n,t,e){const{onUpdate:o,onUnmount:r,onMount:i}=e;!function(){if(window.HTMLElement&&window.HTMLElement._babelES5Adapter||void 0===window.Reflect||void 0===window.customElements||window.customElements.hasOwnProperty("polyfillWrapFlushCallback"))return;const n=HTMLElement;window.HTMLElement=function(){return Reflect.construct(n,[],this.constructor)},HTMLElement.prototype=n.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,n),HTMLElement._babelES5Adapter=!0}();const u=n.attributes||[];class s extends HTMLElement{static get observedAttributes(){return["props-json",...u]}connectedCallback(){this._mountPoint=function(n,t){const{shadow:e}=t;if(e&&n.attachShadow){const t=document.createElement("span");return n.attachShadow({mode:"open"}).appendChild(t),t}return n}(this,n),i(this,this._mountPoint)}disconnectedCallback(){this._mountPoint&&r(this,this._mountPoint)}attributeChangedCallback(){this._mountPoint&&o(this,this._mountPoint)}}n.quiet&&window.customElements.get(t)||window.customElements.define(t,s)},isSupported:function(){return!(!window.customElements||!window.customElements.define)},supportsShadow:function(){return!!(document&&document.body&&document.body.attachShadow)}};function r(n,t){for(let e=0,o=n.length;e<o;e++)t(n[e])}const i="MutationObserver",u={};function s(n,t,e){n.nodeName.toLowerCase()===t?(e.onMount(n,n),function(n,t){const{onUpdate:e}=t;new MutationObserver(n=>{r(n,n=>{const t=n.target;a(t)&&e(t,t)})}).observe(n,{attributes:!0})}(n,e),function(n,t){const{onUnmount:e}=t,o=n.parentNode;if(!o)return;const i=new MutationObserver(t=>{r(t,t=>{r(t.removedNodes,t=>{n===t&&a(n)&&(i.disconnect(o),e(n,n))})})});i.observe(o,{childList:!0,subtree:!0})}(n,e)):n.children&&n.children.length&&r(n.children,n=>{a(n)&&s(n,t,e)})}function a(n){return!!n}var c={__proto__:null,name:i,observers:u,isSupported:function(){return"MutationObserver"in window},defineElement:function(n,t,e){if(!function(n){return!(-1===n.indexOf("-")||!n.match(/^[a-z][a-z0-9-]*$/))}(t=t.toLowerCase())){if(n.quiet)return;throw new Error(`Remount: "${t}" is not a valid custom element elName`)}if(u[t]){if(n.quiet)return;throw new Error(`Remount: "${t}" is already registered`)}const o=new MutationObserver(n=>{r(n,n=>{r(n.addedNodes,n=>{a(n)&&s(n,t,e)})})});o.observe(document.body,{childList:!0,subtree:!0}),u[i]=o,window.addEventListener("DOMContentLoaded",()=>{r(document.getElementsByTagName(i),n=>s(n,i,e))})},supportsShadow:function(){return!1}};let l;function d(){if(l)return l;const n=[o,c].find(n=>!!n.isSupported());return n||console.warn("Remount: This browser doesn't support the MutationObserver API or the Custom Elements API. Including polyfills might fix this. Remount elements will not work. https://github.com/rstacruz/remount"),l=n,n}function m(n,t){const e=n.getAttribute("props-json");return e?JSON.parse(e):(t||[]).reduce((t,e)=>(t[e]=n.getAttribute(e),t),{})}var p=["onAbort","onAnimationCancel","onAnimationEnd","onAnimationIteration","onAuxClick","onBlur","onChange","onClick","onClose","onContextMenu","onDoubleClick","onError","onFocus","onGotPointerCapture","onInput","onKeyDown","onKeyPress","onKeyUp","onLoad","onLoadEnd","onLoadStart","onLostPointerCapture","onMouseDown","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onReset","onResize","onScroll","onSelect","onSelectionChange","onSelectStart","onSubmit","onTouchCancel","onTouchMove","onTouchStart","onTouchEnd","onTransitionCancel","onTransitionEnd","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onFocusOut"],f={onDoubleClick:"dblclick"},h={onInput:"onChange",onFocusOut:"onBlur",onSelectionChange:"onSelect"};function w(n,t){for(var e in n)if(n.hasOwnProperty(e)&&-1!==e.indexOf(t))return n[e]}function b(n){if(n)return n.memoizedProps?n.memoizedProps:n._currentElement&&n._currentElement.props?n._currentElement.props:void 0}function E(n,t,e){n.persist=function(){n.isPersistent=function(){return!0}},e[t]&&e[t](n)}function v(e,o,r,i){const{component:u}=e,s=/*#__PURE__*/n.createElement(u,r),a=t(o);var c,l;o.__remountRoot=a,a.render(s),i&&(c=i.shadowRoot,l=[],p.forEach(function(n){var t=function(n){return f[n]?f[n]:n.replace(/^on/,"").toLowerCase()}(n);function e(t){for(var e=t.path||t.composedPath&&t.composedPath()||function(n){for(var t=[];n;){if(t.push(n),"HTML"===n.tagName)return t.push(document),t.push(window),t;n=n.parentElement}}(t.target),o=0;o<e.length;o++){var r,i=e[o],u=w(i,"_reactInternal");if(r=w(i,"__reactEventHandlers")||b(u),u&&r&&E(t,n,r),u&&r&&h[n]&&E(t,h[n],r),t.cancelBubble)break;if(i===c)break}}c.addEventListener(t,e,!1),l.push(function(){c.removeEventListener(t,e,!1)})}))}const g=(M={__proto__:null,mount:function(n,t,e,o){return v(n,t,e,o)},update:v,unmount:function(n,t){var e;null==(e=t.__remountRoot)||e.unmount()}},(n={},t={})=>function(n,t){const e=d();e&&Object.keys(n).forEach(o=>{const r=Object.assign({},t,"object"==typeof(s=u=n[o])&&s.component?u:{component:u}),i=r.adapter;var u,s;if(!i)throw new Error("No suitable adapter found");e.defineElement(r,o,{onMount(n,t){const e=m(n,r.attributes);i.mount(r,t,e,r.shadow&&r.retarget?n:null)},onUpdate(n,t){const e=m(n,r.attributes);i.update(r,t,e,null)},onUnmount(n,t){i.unmount(r,t)}})})}(n,e({adapter:M},t)));var M;const _={define:g,getStrategy:d};export{_ as default,g as define,d as getStrategy};
//# sourceMappingURL=remount.modern.js.map
